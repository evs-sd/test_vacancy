Небольшая задача на понимание RTOS (FreeRTOS как пример)

Дана воображаемая система. К пинам контроллера подключены кнопки. На пинах настроены прерывания (только по одному фронту). Дребезг контактов игнорируем
Существует задача RTOS, в которой необходимо обрабатывать нажатия кнопок пользователем. Кнопки могут нажиматься по одной или одновременно. 
В качестве выполняемого действия можно делать printf с названием кнопки или комбинации, которые нажаты в данный момент

Задача:

Дополнить шаблон своим кодом, чтобы "реализовать" решение для обработки нажатий кнопок. Код не обязательно должен компилироваться. Это может быть незаконченное решение.
Главное, чтобы Ваше решение работало "в теории". Можно использовать любые решения и подходы. Не важно - будут ли использоваться RTOS функциональность или нет.